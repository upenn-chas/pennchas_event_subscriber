diff --git a/src/Controller/SimplesamlphpAuthController.php b/src/Controller/SimplesamlphpAuthController.php
index 8a084f2..04f675f 100644
--- a/src/Controller/SimplesamlphpAuthController.php
+++ b/src/Controller/SimplesamlphpAuthController.php
@@ -15,6 +15,8 @@ use Symfony\Component\HttpFoundation\RedirectResponse;
 use Symfony\Component\HttpFoundation\RequestStack;
 use Symfony\Component\DependencyInjection\ContainerInterface;
 use Drupal\Core\Config\ConfigFactoryInterface;
+use SimpleSAML\Auth\Simple;
+use Drupal\user\Entity\User;
 
 /**
  * Controller routines for simplesamlphp_auth routes.
@@ -200,6 +202,29 @@ class SimplesamlphpAuthController extends ControllerBase implements ContainerInj
       $this->simplesaml->externalAuthenticate();
     }
 
+    $authSource = new Simple('default-sp'); 
+    $attributes = $authSource->getAttributes();
+    $employeeNumber = $attributes['employeeNumber'][0];
+    $eduPersonPrincipalName = $attributes['eduPersonPrincipalName'][0];
+    $eduPersonEntitlement = $attributes['eduPersonEntitlement'];
+    $edu_person = implode(', ', $eduPersonEntitlement);
+    $field_first_name = $attributes['sn'][0];
+    $field_last_name = $attributes['givenName'][0];
+    $displayName = $attributes['displayName'][0];
+    $name = str_replace(', ', ' ', $displayName);
+
+    $current_user = \Drupal::currentUser();
+    $user = User::load($current_user->id());
+    if($user){
+      $user->set('field_employee_number', $employeeNumber);
+      $user->set('field_edu_person_principal_name', $eduPersonPrincipalName);
+      $user->set('field_edu_person_entitlement', $edu_person);
+      $user->set('field_first_name', $field_first_name);
+      $user->set('field_last_name', $field_last_name);
+      $user->set('field_preferred_name', $name);
+      $user->save();
+    }
+
     // Check to see if we've set a cookie. If there is one, give it priority.
     if ($request->cookies->has('simplesamlphp_auth_returnto')) {
       $redirect = $request->cookies->get('simplesamlphp_auth_returnto');
